<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Game.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">.</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">Game.java</span></div><h1>Game.java</h1><pre class="source lang-java linenums">import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Scanner;
import java.util.Arrays;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;


/**
* Driver class used to run the game(Bridge game).
* @author Chris Cushway
* @author Gerald Ngumbulu
* @author Blessed Chitamba
* @version 1.0
*/

<span class="nc" id="L20">public class Game{</span>
	public static void main(String args[]) throws IOException, InterruptedException{

<span class="nc" id="L23">		Scanner userinput = new Scanner(System.in);</span>
<span class="nc" id="L24">		System.out.println(&quot;Enter level: &quot;);</span>
<span class="nc" id="L25">		String level = userinput.nextLine();</span>
<span class="nc" id="L26">		String lesson_file = &quot;input/input&quot;+level+&quot;.txt&quot;;</span>
<span class="nc" id="L27">		Lesson lesson = new Lesson(lesson_file);</span>
		
<span class="nc" id="L29">		ArrayList&lt;String&gt; copyBestCase = lesson.getBestCase();</span>
<span class="nc" id="L30">		ArrayList&lt;String&gt; cardsPlayed = new ArrayList&lt;String&gt;();</span>
		
<span class="nc" id="L32">		System.out.println(&quot;------------------------------------------------------------------\n&quot;);</span>
		
<span class="nc" id="L34">		int playerTurn = 0;</span>

		//Setting up gui for game

<span class="nc" id="L38">		JFrame window = new JFrame(&quot;Bridge Tutor&quot;);</span>
<span class="nc" id="L39">		window.setExtendedState(JFrame.MAXIMIZED_BOTH);  </span>
<span class="nc" id="L40">		window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>

		/*A way to get the screens size will be used later
		/*For UI components
		*/
<span class="nc" id="L45">		Toolkit tk = Toolkit.getDefaultToolkit();  </span>
<span class="nc" id="L46">		int xSize = ((int) tk.getScreenSize().getWidth());  </span>
<span class="nc" id="L47">		int ySize = ((int) tk.getScreenSize().getHeight()); </span>

		//setting up panel - it is like the &quot;glass&quot; in the window

<span class="nc" id="L51">		JPanel contentPane = new JPanel();</span>
		
		//Array of Jlabels to act as gui hand
		/*This is just code testing to
			see how guis work
			*/
<span class="nc" id="L57">		ArrayList&lt;JLabel&gt; cardLabels = new ArrayList&lt;JLabel&gt;();</span>
<span class="nc bnc" id="L58" title="All 2 branches missed.">		for(int i=0;i&lt;13;i++){</span>
<span class="nc" id="L59">			JLabel cardLabel = new JLabel(new ImageIcon(lesson.getPlayers().get(playerTurn).getCard(i).getCardImage()));</span>
<span class="nc" id="L60">			cardLabel.setSize(120,80);</span>
<span class="nc" id="L61">			cardLabels.add(cardLabel);</span>
		}
		
<span class="nc bnc" id="L64" title="All 2 branches missed.">		for(JLabel j:cardLabels){</span>
<span class="nc" id="L65">    			contentPane.add(j);</span>
			
<span class="nc" id="L67">		}</span>
		
		
<span class="nc" id="L70">		window.getContentPane().add(BorderLayout.SOUTH,contentPane);</span>
<span class="nc" id="L71">		window.getContentPane().setBackground(Color.green);</span>

<span class="nc" id="L73">		window.setVisible(true);</span>

		//-----FIRST PLAY OF THE GAME----------------------------------------------------------------------//
<span class="nc" id="L76">		System.out.println(lesson.getPlayers().get(playerTurn).getPlayerName() + &quot; is now playing.&quot;);</span>
<span class="nc" id="L77">		System.out.println(lesson.getPlayers().get(playerTurn).getPlayerName()+&quot; played: &quot;+lesson.getFirstCardPlayed());</span>
<span class="nc" id="L78">		System.out.println(lesson.getPlayers().get(playerTurn).getPlayerName() + &quot; completed their turn.&quot;+&quot;\n&quot;);</span>
<span class="nc" id="L79">		copyBestCase.remove(0);</span>
<span class="nc" id="L80">		lesson.isValid(lesson.getFirstCardPlayed(),lesson.getPlayers().get(playerTurn));</span>
<span class="nc" id="L81">		cardsPlayed.add(lesson.getFirstCardPlayed());</span>
<span class="nc" id="L82">		playerTurn++;</span>
		//-----FIRST PLAY OF THE GAME END----------------------------------------------------------------------//		
	

		//---------------------------------------------------------THE ACTUAL GAME-----------------------------------------------------///

		//Variables to be tracked
<span class="nc" id="L89">		int tricks = 0;			//tricks in the game (max is 13)	</span>
<span class="nc" id="L90">		boolean trickWinner = false;</span>
<span class="nc" id="L91">		boolean claim = false;		//If a person plays claim</span>
		
<span class="nc bnc" id="L93" title="All 2 branches missed.">		while(tricks &lt; 13){ //max tricks is 13 unless claim played beforehand</span>
<span class="nc bnc" id="L94" title="All 2 branches missed.">				if(tricks==0){</span>
<span class="nc" id="L95">					copyBestCase = lesson.getBestCase1(tricks);</span>
<span class="nc" id="L96">					copyBestCase.remove(0);</span>
				}
				else{
<span class="nc" id="L99">					copyBestCase = lesson.getBestCase1(tricks);</span>
				}
<span class="nc bnc" id="L101" title="All 2 branches missed.">				while(playerTurn&lt;4){</span>
<span class="nc" id="L102">					System.out.print(&quot;Cards played: &quot;);</span>
<span class="nc bnc" id="L103" title="All 2 branches missed.">					for(String card:cardsPlayed){</span>
<span class="nc" id="L104">						System.out.print(card+&quot; &quot;);				</span>
<span class="nc" id="L105">					}</span>
<span class="nc" id="L106">					System.out.print(&quot;\n\n&quot;);</span>
<span class="nc" id="L107">					System.out.println(lesson.getPlayers().get(playerTurn).getPlayerName() + &quot; is now playing.&quot;);</span>
<span class="nc" id="L108">					System.out.println(lesson.getPlayers().get(playerTurn).getPlayerName() + &quot; Please play a card by typing the number and then the suit e.g 6D \n&quot;);</span>
<span class="nc" id="L109">					lesson.getPlayers().get(playerTurn).printNiceHand();</span>
<span class="nc" id="L110">					System.out.println(&quot;\n&quot;);</span>
<span class="nc" id="L111">					System.out.println(&quot;------------------------------------------------------------------&quot;);</span>
					
<span class="nc" id="L113">					String card = userinput.nextLine();</span>
					//If not the first turn
<span class="nc bnc" id="L115" title="All 2 branches missed.">					if(playerTurn&gt;0){</span>

<span class="nc bnc" id="L117" title="All 2 branches missed.">						while(!lesson.isValid(card,lesson.getPlayers().get(playerTurn))){</span>
<span class="nc" id="L118">							System.out.println(&quot;That card is not a valid play please play another card&quot;);</span>
<span class="nc" id="L119">							card = userinput.nextLine();</span>
						}
					//else its the first turn we need to set the suit	
					}else{
<span class="nc" id="L123">						lesson.setFirstCardPlayed(card);</span>
<span class="nc bnc" id="L124" title="All 2 branches missed.">						while(!lesson.isValid(card,lesson.getPlayers().get(playerTurn))){</span>

<span class="nc" id="L126">							System.out.println(&quot;That card is not a valid play please play another card&quot;);</span>
<span class="nc" id="L127">							card = userinput.nextLine();</span>
						}
				
						
					}
<span class="nc" id="L132">					lesson.getPlayers().get(playerTurn).removePlayedCard(card);</span>
<span class="nc bnc" id="L133" title="All 2 branches missed.">					if(!card.equals(copyBestCase.get(0))){</span>
<span class="nc" id="L134">						String bestPlay = lesson.getPlayers().get(playerTurn).bestCaseInHand(copyBestCase);</span>
<span class="nc" id="L135">						System.out.println(&quot;The card that should have been played was: &quot;+bestPlay);</span>
						
					}
					//Add the points of the play to the player i.e playing an ACE adds 14 points to player
<span class="nc" id="L139">					lesson.getPlayers().get(playerTurn).addPoints(lesson.getPlayPoints(card));</span>
<span class="nc" id="L140">					cardsPlayed.add(card);</span>

					//Only let the person claim if it is in fact a stage in the game where claiming will actually win them the game
<span class="nc bnc" id="L143" title="All 4 branches missed.">					if(card.equals(&quot;CLAIM&quot;) &amp;&amp; copyBestCase.equals(&quot;CLAIM&quot;)){</span>
<span class="nc" id="L144">						claim=true;</span>
<span class="nc" id="L145">						break;</span>
					}
<span class="nc" id="L147">					copyBestCase.remove(0);</span>
<span class="nc" id="L148">					playerTurn++;</span>
<span class="nc" id="L149">				}</span>

			//If they claimed
<span class="nc bnc" id="L152" title="All 2 branches missed.">			if(claim){</span>
<span class="nc" id="L153">				lesson.getPlayers().get(playerTurn).setTrickWins(13 - tricks + lesson.getPlayers().get(playerTurn).getTrickWins());</span>
			}
<span class="nc" id="L155">			lesson.decideWinner();</span>
<span class="nc" id="L156">			lesson.reorderPlayers();</span>
<span class="nc" id="L157">			cardsPlayed.clear();</span>
<span class="nc" id="L158">			playerTurn=0;</span>
<span class="nc" id="L159">			tricks++;</span>
			
		}

<span class="nc" id="L163">		lesson.decideGameWinner();</span>
						
<span class="nc" id="L165">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>